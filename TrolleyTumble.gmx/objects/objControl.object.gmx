<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>mskcontrol</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-100</depth>
  <persistent>-1</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>randomize();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>window_center();

if (keyboard_check_pressed(ord('R')))
    room_restart();

if (keyboard_check_pressed(vk_escape) || keyboard_check_pressed(vk_backspace))
    game_end();

if (keyboard_check_pressed(ord('D')))
    objPlayer.hp--;
    
if (keyboard_check_pressed(ord('P')))
    global.paused = !global.paused;
if (global.gameOver) global.paused = false;


if (!global.paused)
{

    global.timer = (global.timer + 1) % INF;

    global.speedTimer = max(global.speedTimer-1,0);
    
    if (global.startTimer == 0)
    {
        if (global.speedTimer &gt; 0)
        {
            //global.yVel = min(global.yVel + .1*min((yVelMax+1)/yVelMaxStart,1), yVelMaxPower);
            global.yVel = yVelMaxPower;
        }
        else
        {
            if (global.yVel &gt; yVelMax)
                global.yVel -= .03;
            
            yVelMax = max(yVelMax - .005,0);
            
            global.yVel = max(global.yVel - .001,0);
        }
        global.distance += (global.yVel*.05);
            
        if (global.timer % 60 == 0 || instance_number(objVictim) &lt; 3)
        {
            repeat(1 + random(5))
                instance_create(TILE+random(WIDTH-2*TILE),-TILE-random(HEIGHT-TILE),objVictim1);
        }
    } else //not yet started
    {
        global.startTimer = max(global.startTimer-1,0);
        global.yVel = 10;
        if (global.startTimer == 0)
        {
            var et = instance_create(0,0,objEffectText);
            et.type = 0;
        }
    }
    
    if (instance_exists(objPlayer) &amp;&amp; objPlayer.hp == 0)
        global.gameOver = true;
    
    if (global.gameOver)
    {
        global.yVel *= .9;
        yVelMax *= .9;
    }
    
    if (global.distance &gt;= global.maxDistance)
    {
        var et = instance_create(0,0,objEffectText);
        et.type = 1;
        global.minDistance = global.maxDistance;
        global.maxDistance += 1.5*(global.maxDistance);
    }
}


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.paused = false;

global.maxHp = 25; //upgradeable
global.combo = 0;

window_set_size(2*WIDTH,2*HEIGHT);
global.shake = false;
shakeTimer = 0;

global.gameOver = false;
global.startTimer = 1*60;

global.theme = 0;
instance_create(0,0,objBg);

global.lever = instance_create(WIDTH/2,HEIGHT, objLever);
instance_create(WIDTH/2,HEIGHT+4*TILE,objPlayer);

yVelMaxStart = 4;
yVelMax = yVelMaxStart;
global.yVel = yVelMax;
yVelMaxPower = 8; //upgradeable

global.speedTimer = 0;
global.maxSpeedTimer = 60; //upgradeable

global.timer = 0;
delay = 0;

global.magnetDistance = 2*TILE; //upgradeable
global.coins = 0;

global.distance = 0;
global.minDistance = 0;
global.maxDistance = 100;
//rail = noone;
//tmpRail = noone;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_set_alpha(1);
draw_set_color(c_white);
draw_set_halign(fa_left);
draw_set_valign(fa_top);
//draw_text(0,0,global.yVel);
draw_text(0,TILE,global.speedTimer);
//draw_text(0,2*TILE,global.distance);

//HUD BG:
draw_sprite_part(sprHud,-1,0,TILE,WIDTH,4*TILE,0,HEIGHT-4*TILE);

//DISTANCE:
draw_sprite_part(sprHud,-1,2*TILE,0,11*TILE,TILE,WIDTH/2-5.5*TILE,TILE);
var dst = (global.distance-global.minDistance)/(global.maxDistance-global.minDistance);
draw_sprite_part(sprHud,-1,TILE,0,TILE,TILE,1.5*TILE+dst*11*TILE,TILE);
drawNumber(string(floor(global.distance))+"m",2*TILE+dst*11*TILE,2*TILE,fa_center,1,c_white,1);

//HEALTH:
if (instance_exists(objPlayer))
{
    draw_sprite_part(sprHud,-1,2*TILE,5*TILE,objPlayer.hp/global.maxHp*3*TILE,TILE,8,HEIGHT-28);
    drawNumber(string(ceil(objPlayer.hp/global.maxHp*100))+"%",8+1.5*TILE,HEIGHT-28+1,fa_center,1,c_white,1);
}

//SPEEDBOOST:
draw_sprite_part(sprHud,-1,0,5*TILE,2*TILE,2*TILE*(1-(global.speedTimer/global.maxSpeedTimer)),169,HEIGHT-37);

//STAMINA:
var sangle = -90+180*((1-(yVelMax/yVelMaxStart)));
draw_sprite_ext(sprSpeedhand,-1,2*TILE,HEIGHT-36,1,1,sangle,c_white,1);

//COINS:
draw_sprite_part(sprGraphics,-1,(floor(global.timer*.1)%4)*TILE,0,TILE,TILE,0,0);
drawNumber(global.coins,TILE+1,3,fa_left,1,c_white,1);

//PAUSED:
draw_sprite_part(sprHud,-1,5*TILE+2*global.paused*TILE,5*TILE,2*TILE,2*TILE,WIDTH-2*TILE,HEIGHT-2*TILE);
if (in(mouse_x,WIDTH-2*TILE,WIDTH) &amp;&amp; in(mouse_y,HEIGHT-2*TILE,HEIGHT) &amp;&amp; mouse_check_button_pressed(mb_any))
    global.paused = !global.paused;
//drawNumber(global.coins,2*TILE,HEIGHT-28+1,fa_center,1,c_white,1);

//++++SHAKE SCREEN++++
if (global.shake)
{
    shakeTimer = 5;
    global.shake = false;
}
if (!global.paused &amp;&amp; shakeTimer)
{
    shakeTimer = max(shakeTimer-1,0);
    view_xview[0] = -2+random(4);
    view_yview[0] = -2+random(4);
    //view_angle[0] = -2+random(4);
} else
{
    view_xview[0] = 0;
    view_yview[0] = 0;
    //view_angle[0] = 0;
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
