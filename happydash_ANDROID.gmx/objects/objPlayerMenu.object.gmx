<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>objAll</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>depth = HUDDEPTH;
mask_index = sprParticleMask;

//PLAYER
cursor = global.playerSelected;
maxCursor = global.maxPlayerSelected;

global.playerLocked[0] = false; //happy - default
global.playerLocked[3] = false; //horse - free gift

locked0 = true;
locked1 = true;
locked2 = true;

frame = 0;
fCur = 0;
fSpeed = .2;
fMax = 4;

////BUTTONS
index = 1;
maxIndex = 1;

//back
btn[0] = instance_create(WIDTH/2 - 3*TILE,9*TILE,objButton);
btn[0].text = "";
btn[0].index = 0;
btn[0].parent = id;
btn[0].fnt = fntMenu;
btn[0].w = 3*TILE;
btn[0].h = 3*TILE;

//play
btn[1] = instance_create(WIDTH/2 + 3*TILE,9*TILE,objButton);
btn[1].text = "";
btn[1].index = 1;
btn[1].parent = id;
btn[1].fnt = fntMenu;
btn[1].w = 3*TILE;
btn[1].h = 3*TILE;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//instance_activate_object(objControl);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (instance_exists(parent))
{
    if (!parent.playerSelection)
        instance_destroy();
    //handleButtons();
} else
    instance_destroy();

locked0 = global.playerLocked[((cursor + maxCursor) % (maxCursor + 1))];
locked1 = global.playerLocked[cursor];
locked2 = global.playerLocked[((cursor + 1) % (maxCursor + 1))];

if (btn[0].pressed || keyboard_check_pressed(vk_backspace))
{
    with (btn[0]) instance_destroy();
    parent.playerSelection = false;
    instance_destroy();
}

if ((!locked1 || (os_type == os_windows &amp;&amp; debug_mode)) &amp;&amp; btn[1].pressed)
{
    global.playerSelected = cursor;
    
    //who am i achievement
    if (global.playerSelected != 0)
        postAchievement("CgkIsq60qNAMEAIQFA",100,false);
    
    saveOptions();
    room_goto(MAIN);
    instance_destroy();
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_set_color(c_black);
draw_set_alpha(.5);
draw_rectangle(0,0,WIDTH,HEIGHT,0);
draw_set_alpha(1);
draw_set_color(c_white);

//BUTTONS
var a; a = 0;
if (btn[0].active &amp;&amp; mouse_check_button(mb_left)) a = 1;
draw_sprite_part(spriteHud,-1,0,11*TILE+3*a*TILE,3*TILE,3*TILE,btn[0].x-1.5*TILE,btn[0].y);

var b; b = 0;
if (btn[1].active &amp;&amp; mouse_check_button(mb_left)) b = 1;
draw_sprite_part_ext(spriteHud,-1,3*TILE,11*TILE+3*b*TILE,3*TILE,3*TILE,btn[1].x-1.5*TILE,btn[1].y,1,1,c_white,1-.5*locked1);

//TEXT
draw_set_halign(fa_center);
draw_set_valign(fa_top);

var txtName;
if (!locked1)
    txtName = "Play as " + '"' + global.playerName[cursor] + '"!';
else
    txtName = "&lt;locked&gt;";
drawText(WIDTH/2,3*TILE,txtName,c_white,c_black,fntButton);

//SELECTORS
var ax,ay,bx,by,lp, rp;
ax = 5*TILE;ay = 6*TILE;
bx = WIDTH-7*TILE;by = 6*TILE;
lp = in(mouse_x,ax,ax+2*TILE) &amp;&amp; in(mouse_y,ay,ay+2*TILE);
rp = in(mouse_x,bx,bx+2*TILE) &amp;&amp; in(mouse_y,by,by+2*TILE);

draw_sprite_part(spriteHud,-1,9*TILE,11*TILE+2*(lp &amp;&amp; mouse_check_button(mb_left))*TILE,2*TILE,2*TILE,ax,ay);
draw_sprite_part(spriteHud,-1,11*TILE,11*TILE+2*(rp &amp;&amp; mouse_check_button(mb_left))*TILE,2*TILE,2*TILE,bx,by);

if (lp &amp;&amp; mouse_check_button_released(mb_left))
    cursor = (cursor + maxCursor) % (maxCursor + 1);
if (rp &amp;&amp; mouse_check_button_released(mb_left))
    cursor = (cursor + 1) % (maxCursor + 1);


//BORDER
draw_sprite_part(spriteHud,-1,6*TILE,11*TILE,3*TILE,3*TILE,WIDTH/2-1.5*TILE,HEIGHT/2-2*TILE);

//POSSIBLE PLAYERS
fCur = (fCur + fSpeed) % fMax;
frame = floor(fCur);

if (!locked0) c0 = c_white else c0 = c_black;
if (!locked1) c1 = c_white else c1 = c_black;
if (!locked2) c2 = c_white else c2 = c_black;
draw_sprite_part_ext(spritePlayer,-1,frame*2*TILE,10*TILE*((cursor + maxCursor) % (maxCursor + 1)),2*TILE,2*TILE, WIDTH/2 - 5*TILE, HEIGHT/2 - 1.5*TILE,1,1,c0,1-locked0*.5);
if (locked0) draw_sprite_part(spriteHud,-1,6*TILE,14*TILE,3*TILE,3*TILE, WIDTH/2 - 5.5*TILE, HEIGHT/2 - 2*TILE);

draw_sprite_part_ext(spritePlayer,-1,frame*2*TILE,10*TILE*cursor,2*TILE,2*TILE,WIDTH/2 - TILE, HEIGHT/2 - 1.5*TILE,1,1,c1,1-locked1*.5);
if (locked1) draw_sprite_part(spriteHud,-1,6*TILE,14*TILE,3*TILE,3*TILE, WIDTH/2 - TILE, HEIGHT/2 - 2*TILE);

draw_sprite_part_ext(spritePlayer,-1,frame*2*TILE,10*TILE*((cursor + 1) % (maxCursor + 1)),2*TILE,2*TILE, WIDTH/2 + 3*TILE, HEIGHT/2 - 1.5*TILE,1,1,c2,1-locked2*.5);
if (locked2) draw_sprite_part(spriteHud,-1,6*TILE,14*TILE,3*TILE,3*TILE, WIDTH/2 + 2.5*TILE, HEIGHT/2 - 2*TILE);


</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
